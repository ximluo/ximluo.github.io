"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[632],{9632:(e,r,t)=>{t.r(r),t.d(r,{default:()=>S,preloadBunnyAssets:()=>L});var n=t(5043),o=t(7950),a=t(3037),i=t(2340),c=t(6852),s=t(2968),u=t(9435),l=t(8270);class f{constructor(e,r,t,n){this.renderer=void 0,this.shader=void 0,this.orthoScene=void 0,this.fbos=void 0,this.current=void 0,this.output=void 0,this.orthoCamera=void 0,this.orthoQuad=void 0,this.renderer=e,this.shader=n,this.orthoScene=new u.Z58;const o=new u.nWS(r,t,{wrapS:u.ghU,wrapT:u.ghU,minFilter:u.k6q,magFilter:u.k6q,format:u.GWd,type:u.RQf,stencilBuffer:!1,depthBuffer:!1});o.texture.generateMipmaps=!1,this.fbos=[o,o.clone()],this.current=0,this.output=this.fbos[0],this.orthoCamera=new u.qUd(r/-2,r/2,t/2,t/-2,1e-5,1e3),this.orthoQuad=new u.eaF(new u.bdM(r,t),this.shader),this.orthoScene.add(this.orthoQuad)}render(){this.shader.uniforms.inputTexture.value=this.fbos[this.current].texture,this.current=1-this.current,this.output=this.fbos[this.current],this.renderer.setRenderTarget(this.output),this.renderer.render(this.orthoScene,this.orthoCamera),this.renderer.setRenderTarget(null)}dispose(){this.orthoQuad.geometry.dispose(),this.fbos.forEach((e=>e.dispose()))}}const d=e=>{let r=e%(2*Math.PI);return r<-Math.PI?r+=2*Math.PI:r>Math.PI&&(r-=2*Math.PI),r},m=(e,r,t)=>Math.min(t,Math.max(r,e));var h=t(4718),p=t(4865);const R=e=>{let{gl:r,isMobile:t,colors:n,floorSizeRef:o,lineRef:a,floorRef:i,carrotMarkerRef:c,carrotMarkerDotRef:s,bufferSimRef:l,floorSimMatRef:d,particlesRef:m,particles2Ref:h,primMatRef:R,bonusMatRef:b,addToScene:w}=e;const y=t?384:640;let v=null;d.current=null,l.current=null;const g=new u.Fvt({color:8122111,linewidth:1,scale:1,dashSize:.2,gapSize:.1}),M=(new u.LoY).setFromPoints([new u.Pq0(0,.2,0),new u.Pq0(3,.2,3)]),x=w(new u.N1A(M,g));a.current=x;const S=new u.iNn(.2,.2,.2,1,1,1),P=[],L=[];for(let f=0;f<20;f++){const e=new u.eaF(S,b.current);e.scale.set(0,0,0),P.push(w(e))}for(let f=0;f<5;f++){const e=new u.eaF(S,R.current);e.scale.set(0,0,0),L.push(w(e))}m.current=P,h.current=L,w(new u.$p8(16777215));const k=new u.ZyN(16777215,1);k.position.set(1,5,1),k.castShadow=!t,k.shadow.mapSize.width=512,k.shadow.mapSize.height=512,k.shadow.camera.near=.5,k.shadow.camera.far=12,k.shadow.camera.left=-12,k.shadow.camera.right=12,k.shadow.camera.bottom=-12,k.shadow.camera.top=12,k.shadow.radius=3,k.shadow.blurSamples=4,w(k);const C=w(new p.J(new u.bdM(o.current,o.current),{color:new u.Q1f(n.floor),textureWidth:y,textureHeight:y}));if(C.rotation.x=-Math.PI/2,C.receiveShadow=!0,i.current=C,C.material instanceof u.BKk&&C.material.uniforms.tScratches){const e=t?384:640;v=new u.BKk({uniforms:{inputTexture:{value:null},time:{value:0},blade1PosOld:{value:new u.I9Y(.5,.5)},blade1PosNew:{value:new u.I9Y(.5,.5)},strength:{value:0}},vertexShader:"\n      precision highp float;\n      uniform float time;\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        vec4 modelViewPosition = modelViewMatrix * vec4(position, 1.0);\n        gl_Position = projectionMatrix * modelViewPosition; \n      }\n    ",fragmentShader:"\n      precision highp float;\n      uniform sampler2D inputTexture;\n      uniform vec2 blade1PosOld;\n      uniform vec2 blade1PosNew;\n      uniform float strength;\n      uniform float time;\n      varying vec2 vUv;\n\n      float lineSegment(vec2 p, vec2 a, vec2 b, float thickness) {\n          vec2 pa = p - a;\n          vec2 ba = b - a;\n          float h = clamp(dot(pa,ba)/dot(ba,ba), 0.0, 1.0);\n          float idk = length(pa - ba*h);\n          return smoothstep(thickness, 0.2 * thickness, idk);\n      }\n\n      void main(void) {\n        vec4 prevTexture = texture2D(inputTexture, vUv);\n        vec3 col = prevTexture.rgb * 0.999;\n        if (strength > 0.0) {\n            float space = 0.001;\n            float crease = 0.001;\n            float thickness = 0.001 + strength * 0.001;\n            float leftRed = lineSegment(vUv + space, blade1PosOld, blade1PosNew, thickness);\n            float leftGreen = lineSegment(vUv + space + crease, blade1PosOld, blade1PosNew, thickness);\n            float rightRed = lineSegment(vUv - space - crease, blade1PosOld, blade1PosNew, thickness);\n            float rightGreen = lineSegment(vUv - space, blade1PosOld, blade1PosNew, thickness);\n            col.r += (leftRed + rightRed) * strength * 3.0;\n            col.g += (leftGreen + rightGreen) * strength * 3.0;\n            col.r = clamp(col.r, 0.0, 1.0);\n            col.g = clamp(col.g, 0.0, 1.0);\n        }\n        gl_FragColor = vec4(col, 1.0);\n      }\n    "}),d.current=v,l.current=new f(r,e,e,v)}const B=w(new u.eaF(new u.rKP(.25,.35,32),new u.V9B({color:new u.Q1f(n.carrotBody),transparent:!0,opacity:.65,side:u.$EB})));B.rotation.x=-Math.PI/2,B.position.y=.01,B.visible=!1,c.current=B;const j=w(new u.eaF(new u.tcD(.07,24),new u.V9B({color:new u.Q1f(n.carrotLeaf),side:u.$EB})));return j.rotation.x=-Math.PI/2,j.position.y=.015,j.visible=!1,s.current=j,{floorSimMat:v,lineMaterial:g,lineGeometry:M,particleGeom:S}},b=e=>{let{scene:r,camera:t,gl:o,isMobile:a,colors:i,setModelLoaded:c,floorSizeRef:s,rabbitRef:l,rabbitBodyRef:f,earLeftRef:d,earRightRef:m,carrotRef:p,carrotMarkerRef:b,carrotMarkerDotRef:w,floorRef:y,lineRef:v,bufferSimRef:g,floorSimMatRef:M,particlesRef:x,particles2Ref:S,primMatRef:P,secMatRef:L,bonusMatRef:k,leafMatRef:C,outlineMatRef:B}=e;(0,n.useEffect)((()=>{r.fog=new u.jUj(new u.Q1f(i.fog).getHex(),13,20),t.position.set(0,4,8),t.lookAt(0,0,0);const e=[],n={current:!1},j=t=>(r.add(t),e.push(t),t),{floorSimMat:N,lineMaterial:z,lineGeometry:E,particleGeom:I}=R({gl:o,isMobile:a,colors:i,floorSizeRef:s,lineRef:v,floorRef:y,carrotMarkerRef:b,carrotMarkerDotRef:w,bufferSimRef:g,floorSimMatRef:M,particlesRef:x,particles2Ref:S,primMatRef:P,bonusMatRef:k,addToScene:j});return(e=>{let{addToScene:r,disposedRef:t,setModelLoaded:n,rabbitRef:o,rabbitBodyRef:a,earLeftRef:i,earRightRef:c,carrotRef:s,...u}=e;(new h.B).load("/models/rabbit.glb",(e=>{if(t.current)return;const l=e.scene,f=l.getObjectByName("Rabbit"),d=l.getObjectByName("body"),m=l.getObjectByName("earRight"),h=l.getObjectByName("earLeft"),p=l.getObjectByName("tail"),R=l.getObjectByName("footLeft"),b=l.getObjectByName("footRight"),w=l.getObjectByName("eyeLeft"),y=l.getObjectByName("eyeRight"),v=l.getObjectByName("carrot"),g=l.getObjectByName("carrotLeaf"),M=l.getObjectByName("carrotLeaf2");f&&d&&m&&h&&p&&R&&b&&w&&y&&v&&g&&M&&(((e,r)=>{let{primMatRef:t,secMatRef:n,bonusMatRef:o,leafMatRef:a,outlineMatRef:i}=r;e.carrot.rotation.z=.2,e.carrot.rotation.x=.2,e.rabbitBody.material=t.current,e.earRight.material=t.current,e.earLeft.material=t.current,e.tail.material=t.current,e.footLeft.material=n.current,e.footRight.material=n.current,e.eyeLeft.material=n.current,e.eyeRight.material=n.current,e.carrot.material=o.current,e.carrotLeaf.material=a.current,e.carrotLeaf2.material=a.current;const c=e=>{const r=e.clone();r.children=[],r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),r.material=i.current,e.add(r)};c(e.rabbitBody),c(e.earRight),c(e.earLeft),c(e.tail),c(e.carrot),e.rabbit.traverse((e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),e.carrot.traverse((e=>{e.isMesh&&(e.castShadow=!0)}))})({rabbit:f,rabbitBody:d,earRight:m,earLeft:h,tail:p,footLeft:R,footRight:b,eyeLeft:w,eyeRight:y,carrot:v,carrotLeaf:g,carrotLeaf2:M},u),r(f),r(v),o.current=f,a.current=d,i.current=h,c.current=m,s.current=v,n(!0))}))})({addToScene:j,disposedRef:n,setModelLoaded:c,rabbitRef:l,rabbitBodyRef:f,earLeftRef:d,earRightRef:m,carrotRef:p,primMatRef:P,secMatRef:L,bonusMatRef:k,leafMatRef:C,outlineMatRef:B}),()=>{var t,o,a;n.current=!0,c(!1),null===(t=y.current)||void 0===t||null===(o=t.dispose)||void 0===o||o.call(t),e.forEach((e=>{e.parent===r&&r.remove(e)})),(e=>{const r=new Set;e.forEach((e=>{e.traverse((e=>{if(e.isMesh||e.isLine){const t=e.geometry;t&&r.add(t)}}))})),r.forEach((e=>e.dispose()))})(e),E.dispose(),z.dispose(),I.dispose(),null===N||void 0===N||N.dispose(),null===(a=g.current)||void 0===a||a.dispose(),v.current=null,y.current=null,b.current=null,w.current=null,l.current=null,f.current=null,d.current=null,m.current=null,p.current=null,x.current=[],S.current=[],M.current=null,g.current=null}}),[k,g,t,w,b,p,i,d,m,y,M,s,o,a,C,v,B,S,x,P,f,l,r,L,c])},w=e=>{let{colors:r,onCarrotCollected:t,isMobile:o}=e;const{scene:a,gl:i,camera:c}=(0,s.C)(),[f,h]=(0,n.useState)(!1),[p,R]=(0,n.useState)(!1),w=(0,n.useRef)(null),y=(0,n.useRef)(null),v=(0,n.useRef)(null),g=(0,n.useRef)(null),M=(0,n.useRef)(null),x=(0,n.useRef)(null),S=(0,n.useRef)(null),P=(0,n.useRef)(null),L=(0,n.useRef)(null),k=(0,n.useRef)(null),C=(0,n.useRef)(null),B=(0,n.useRef)([]),j=(0,n.useRef)([]),N=(0,n.useRef)(new u.I9Y(0,0)),z=(0,n.useRef)(0),E=(0,n.useRef)(0),I=(0,n.useRef)(new u.I9Y(.5,.5)),O=(0,n.useRef)(new u.I9Y(.5,.5)),A=(0,n.useRef)(new u.I9Y(.5,.5)),U=(0,n.useRef)(new u.I9Y(0,0)),Q=(0,n.useRef)({jumpProgress:0}),D=(0,n.useRef)(!1),T=(0,n.useRef)(new u.I9Y),V=(0,n.useRef)(new u.tBo),F=(0,n.useRef)(30),Y=(0,n.useRef)(0),H=(0,n.useRef)(new u.Df({color:new u.Q1f(r.bunnyPrimary)})),G=(0,n.useRef)(new u.Df({color:new u.Q1f(r.bunnySecondary)})),J=(0,n.useRef)(new u.Df({color:new u.Q1f(r.carrotBody)})),q=(0,n.useRef)(new u.Df({color:new u.Q1f(r.carrotLeaf)})),K=(0,n.useRef)(new u.BKk({uniforms:{color:{value:new u.Q1f(0)},size:{value:.02},time:{value:0}},vertexShader:"\n      uniform float size;\n      uniform float time;\n\n      void main() {\n        vec3 transformed = position + normal * size * (1.0 + abs(sin(position.y * time * 0.02) * 2.0));\n        vec4 modelViewPosition = modelViewMatrix * vec4(transformed, 1.0);\n        gl_Position = projectionMatrix * modelViewPosition; \n      }\n    ",fragmentShader:"\n      uniform vec3 color;\n      void main() {\n        gl_FragColor = vec4(color, 1.0);\n      }\n    ",side:u.hsX}));(0,n.useEffect)((()=>{if(H.current.color.set(r.bunnyPrimary),G.current.color.set(r.bunnySecondary),J.current.color.set(r.carrotBody),q.current.color.set(r.carrotLeaf),K.current.uniforms.color.value=new u.Q1f(r.outline),a.fog=new u.jUj(new u.Q1f(r.fog).getHex(),13,20),P.current){var e;const t=P.current.material;t.color?t.color.set(r.floor):null!==(e=t.uniforms)&&void 0!==e&&e.color&&t.uniforms.color.value.set(new u.Q1f(r.floor))}if(x.current){x.current.material.color.set(r.carrotBody)}if(S.current){S.current.material.color.set(r.carrotLeaf)}}),[r,a]),b({scene:a,camera:c,gl:i,isMobile:o,colors:r,setModelLoaded:h,floorSizeRef:F,rabbitRef:w,rabbitBodyRef:y,earLeftRef:v,earRightRef:g,carrotRef:M,carrotMarkerRef:x,carrotMarkerDotRef:S,floorRef:P,lineRef:L,bufferSimRef:k,floorSimMatRef:C,particlesRef:B,particles2Ref:j,primMatRef:H,secMatRef:G,bonusMatRef:J,leafMatRef:q,outlineMatRef:K}),(0,n.useEffect)((()=>{const e=Q.current,r=H.current,t=G.current,n=J.current,o=q.current,a=K.current;return()=>{l.Ay.killTweensOf(e),r.dispose(),t.dispose(),n.dispose(),o.dispose(),a.dispose()}}),[]);const W=(0,n.useCallback)((()=>{x.current&&(x.current.visible=!1),S.current&&(S.current.visible=!1)}),[]),_=(0,n.useCallback)((()=>{if(!M.current)return;W();const e=o?.24:.3,r=(Math.random()-.5)*e,t=(Math.random()-.5)*e,n=.2+1*Math.random(),a=r*F.current,i=t*F.current;M.current.position.x=a,M.current.position.z=i,M.current.position.y=-1,M.current.scale.set(0,0,0),M.current.visible=!0,n>.85&&x.current&&S.current&&(x.current.visible=!0,S.current.visible=!0,x.current.position.set(a,.01,i),S.current.position.set(a,.015,i),x.current.scale.set(.4,.4,.4),S.current.scale.set(0,0,0),l.Ay.to(x.current.scale,{duration:.8,ease:"elastic.out",x:1,y:1,z:1}),l.Ay.to(S.current.scale,{duration:.6,ease:"back.out(1.7)",x:1,y:1,z:1})),l.Ay.to(M.current.scale,{duration:1.5,ease:"elastic.out",x:1,y:1,z:1}),l.Ay.to(M.current.position,{duration:1.5,ease:"elastic.out",y:n})}),[W,o]),X=(0,n.useCallback)((e=>{D.current=!0;for(const r of B.current)r.position.set(e.x,e.y,e.z),r.scale.set(2,2,2),l.Ay.to(r.position,{x:e.x+1.5*(-.5+Math.random()),y:e.y+1.5*(.5+Math.random()),z:e.z+1.5*(-.5+Math.random()),duration:1,ease:"power4.out"}),l.Ay.to(r.scale,{x:0,y:0,z:0,duration:1,ease:"power4.out",onComplete:()=>{_(),D.current=!1}});for(const r of j.current)r.position.set(e.x,e.y,e.z),r.scale.set(2,2,2),l.Ay.to(r.position,{x:e.x+1.5*(-.5+Math.random()),y:e.y+1.5*(.5+Math.random()),z:e.z+1.5*(-.5+Math.random()),duration:1,ease:"power4.out"}),l.Ay.to(r.scale,{x:0,y:0,z:0,duration:1,ease:"power4.out"})}),[_]),$=(0,n.useCallback)((()=>{if(D.current||!w.current||!M.current)return;const e=w.current.position.clone();e.sub(M.current.position),e.length()<=1&&M.current.visible&&(M.current.visible=!1,W(),X(M.current.position.clone()),t())}),[X,W,t]),Z=(0,n.useCallback)((()=>{if(!w.current||!y.current||!v.current||!g.current)return;R(!0);const e=Math.floor(5*N.current.length())+1,r=.5+.2*e,t=E.current>0?2*Math.PI*e:2*-Math.PI*e;l.Ay.to(y.current.rotation,{duration:r,ease:"linear.none",y:t,onComplete:()=>{y.current&&(y.current.rotation.y=0)}}),l.Ay.to([v.current.rotation,g.current.rotation],{duration:.8*r,ease:"power4.out",x:Math.PI/4}),l.Ay.to([v.current.rotation,g.current.rotation],{duration:.2*r,delay:.8*r,ease:"power4.in",x:0}),l.Ay.to(Q.current,{duration:.5*r,ease:"power2.out",jumpProgress:.5,onUpdate:()=>{if(!w.current)return;const r=Math.sin(Q.current.jumpProgress*Math.PI);w.current.position.y=Math.pow(r,4)*e}}),l.Ay.to(Q.current,{duration:.5*r,ease:"power2.in",delay:.5*r,jumpProgress:1,onUpdate:()=>{if(!w.current)return;const r=Math.sin(Q.current.jumpProgress*Math.PI);w.current.position.y=Math.pow(r,1)*e},onComplete:()=>{w.current&&(w.current.position.y=0,Q.current.jumpProgress=0,R(!1))}})}),[]);return(e=>{let{mouseRef:r,rabbitRef:t,isJumping:o,onJump:a}=e;(0,n.useEffect)((()=>{const e=e=>{r.current.x=e.clientX/window.innerWidth*2-1,r.current.y=-e.clientY/window.innerHeight*2+1},n=e=>{1===e.touches.length&&(e.preventDefault(),r.current.x=e.touches[0].clientX/window.innerWidth*2-1,r.current.y=-e.touches[0].clientY/window.innerHeight*2+1)},i=()=>{t.current&&!o&&a()};return window.addEventListener("mousemove",e),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("mousedown",i),window.addEventListener("touchstart",i),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",n),window.removeEventListener("mousedown",i),window.removeEventListener("touchstart",i)}}),[o,r,a,t])})({mouseRef:T,rabbitRef:w,isJumping:p,onJump:Z}),(e=>{let{modelLoaded:r,isMobile:t,isJumping:n,camera:o,timeRef:a,outlineMatRef:i,rabbitRef:c,earLeftRef:l,earRightRef:f,carrotRef:h,floorRef:p,lineRef:R,floorSimMatRef:b,bufferSimRef:w,floorSizeRef:y,mouseRef:v,raycasterRef:g,heroSpeedRef:M,heroOldRotRef:x,heroAngularSpeedRef:S,heroOldUVPosRef:P,heroNewUVPosRef:L,targetHeroUVPosRef:k,targetHeroAbsPosRef:C,onCollisionCheck:B}=e;(0,s.D)(((e,s)=>{if(!r)return;const j=Math.min(s,.3);if(a.current+=j,i.current.uniforms.time.value=a.current,!c.current||!R.current||!p.current)return;g.current.setFromCamera(v.current,o);const N=g.current.intersectObject(p.current);N.length>0&&N[0].uv&&(k.current.x=N[0].uv.x,k.current.y=N[0].uv.y);const z=t?.22:.3,E=m(k.current.x-.5,-z,z),I=m(k.current.y-.5,-z,z);C.current.x=E*y.current,C.current.y=-I*y.current;const O=C.current.x-c.current.position.x,A=C.current.y-c.current.position.z,U=Math.atan2(A,O),Q=Math.sqrt(O*O+A*A),D=O*j*.3,T=A*j*.3;M.current.x+=D,M.current.y+=T,M.current.x*=Math.pow(j,.005),M.current.y*=Math.pow(j,.005),c.current.position.x+=M.current.x,c.current.position.z+=M.current.y;const V=-U+Math.PI/2;Q>.3&&(c.current.rotation.y+=3*d(V-c.current.rotation.y)*j),S.current=d(c.current.rotation.y-x.current),x.current=c.current.rotation.y,!n&&l.current&&f.current&&(l.current.rotation.x=f.current.rotation.x=2*-M.current.length());const F=R.current.geometry.attributes.position.array;if(F[0]=C.current.x,F[2]=C.current.y,F[3]=c.current.position.x,F[4]=c.current.position.y,F[5]=c.current.position.z,R.current.geometry.attributes.position.needsUpdate=!0,R.current.computeLineDistances(),L.current.x=.5+c.current.position.x/y.current,L.current.y=.5-c.current.position.z/y.current,p.current.material instanceof u.BKk){const e=p.current.material.uniforms.tScratches;e&&b.current&&w.current&&(b.current.uniforms.time.value+=j,b.current.uniforms.blade1PosNew.value=L.current,b.current.uniforms.blade1PosOld.value=P.current,b.current.uniforms.strength.value=n?0:1/(1+10*M.current.length()),w.current.render(),e.value=w.current.output.texture)}P.current.copy(L.current),h.current&&(h.current.rotation.y+=j),B()}))})({modelLoaded:f,isMobile:o,isJumping:p,camera:c,timeRef:Y,outlineMatRef:K,rabbitRef:w,earLeftRef:v,earRightRef:g,carrotRef:M,floorRef:P,lineRef:L,floorSimMatRef:C,bufferSimRef:k,floorSizeRef:F,mouseRef:T,raycasterRef:V,heroSpeedRef:N,heroOldRotRef:z,heroAngularSpeedRef:E,heroOldUVPosRef:I,heroNewUVPosRef:O,targetHeroUVPosRef:A,targetHeroAbsPosRef:U,onCollisionCheck:$}),null},y="bunny-carrot-count",v=e=>{if(null===e)return 0;const r=parseInt(e,10);return Number.isNaN(r)||r<0?0:r},g=()=>{const[e,r]=(0,n.useState)((()=>"undefined"===typeof window?0:v(window.sessionStorage.getItem(y)))),t=(0,n.useRef)(!1);(0,n.useEffect)((()=>{if("undefined"===typeof window)return;const e=e=>{if(e.key!==y)return;const n=v(e.newValue);r((e=>e===n?e:(t.current=!0,n)))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]),(0,n.useEffect)((()=>{"undefined"!==typeof window&&(t.current?t.current=!1:window.sessionStorage.setItem(y,e.toString()))}),[e]);const o=(0,n.useCallback)((()=>{r((e=>e+1))}),[]);return{carrotCount:e,incrementCarrotCount:o}};var M=t(579);const x="bunny-modal-root",S=e=>{let{onClose:r,theme:t}=e;const s=(0,n.useRef)(null),[u,l]=(0,n.useState)(!1),f=(0,c.A)(768),{carrotCount:d,incrementCarrotCount:m}=g();(0,n.useEffect)((()=>{if("undefined"===typeof document)return;let e=document.getElementById(x);e||(e=document.createElement("div"),e.id=x,document.body.appendChild(e));const r=document.createElement("div");return e.appendChild(r),s.current=r,l(!0),()=>{var r;s.current&&null!==(r=e)&&void 0!==r&&r.contains(s.current)&&e.removeChild(s.current),e&&0===e.childNodes.length&&e.remove(),s.current=null}}),[]);const h=i.Sj[t],p=f?[1,1.1]:[1,1.4],R=(0,n.useMemo)((()=>({floor:h["--game-floor"],fog:h["--game-fog"],bunnyPrimary:h["--bunny-primary"],bunnySecondary:h["--bunny-secondary"],carrotBody:h["--carrot-body"],carrotLeaf:h["--carrot-leaf"],outline:h["--game-outline"]})),[h]);return u&&s.current?(0,o.createPortal)((0,M.jsx)("div",{className:"bunny-modal-backdrop",style:{"--bunny-modal-border":h["--game-border"],"--bunny-modal-shadow":h["--game-shadow"],"--bunny-modal-radius":f?"18px":"26px","--bunny-modal-text":h["--color-text"],"--bunny-modal-accent":h["--color-accent-primary"],"--bunny-modal-button-bg":h["--button-bg-light"],"--bunny-modal-counter-top":f?"16px":"26px","--bunny-modal-counter-left":f?"16px":"30px","--bunny-modal-counter-size":f?"0.65rem":"0.8rem"},onClick:r,children:(0,M.jsxs)("div",{className:"bunny-modal-panel",onClick:e=>e.stopPropagation(),children:[(0,M.jsx)(a.Hl,{className:"bunny-modal-canvas",shadows:!f,gl:{antialias:!f,preserveDrawingBuffer:!1,alpha:!1,powerPreference:"high-performance"},dpr:p,children:(0,M.jsx)(w,{colors:R,onCarrotCollected:m,isMobile:f})}),(0,M.jsxs)("div",{className:"bunny-modal-counter",children:["CARROTS \xb7 ",d]}),(0,M.jsx)("div",{className:"bunny-modal-hint",children:"- Press to jump -"}),(0,M.jsx)("div",{className:"bunny-modal-footer",children:(0,M.jsx)("button",{type:"button",className:"bunny-modal-text-button",onClick:r,children:"close"})}),(0,M.jsx)("button",{type:"button",onClick:r,className:"bunny-modal-close-button",children:"\xd7"})]})}),s.current):null};let P=!1;const L=()=>{P||"undefined"===typeof window||(P=!0,fetch("/models/rabbit.glb").catch((()=>{P=!1})))}}}]);
//# sourceMappingURL=632.7f9aacaa.chunk.js.map